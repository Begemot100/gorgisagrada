<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Logs</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/work.css') }}">
</head>
<body>
    <div class="page-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Corgi Cafe Logo">
            </div>
        </aside>

        <!-- Main Content -->
        <div class="content">
            <!-- Header -->
            <header class="header">
                <h1>Employees</h1>
            </header>

            <!-- Filters -->
            <div class="filter-bar">
                <div class="left-buttons">
                    <button class="filter-btn">Hoy</button>
                    <button class="filter-btn">Grupo</button>
                    <button class="filter-btn" onclick="resetFilter()">Restablecer filtro</button>
                </div>
                <div class="right-buttons">
                    <button class="ellipsis-btn" onclick="toggleDropdown()">
                        <img src="{{ url_for('static', filename='images/img_3.png') }}" alt="Ellipsis Icon">
                    </button>
                    <div id="dropdown-menu" class="dropdown-menu hidden">
                        <ul>
                            <li>ChooseAll</li>
                            <li>Editar</li>
                            <li>Exportar a Excel</li>
                            <li>Exportar a PDF</li>
                            <li class="delete">Eliminar</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Main Container -->
            <div class="main-container">
                {% for employee_data in employees %}
                <div class="employee-section">
                    <!-- Rounded Checkbox -->
                    <div class="checkbox-container">
                        <input type="checkbox" class="round-checkbox" />
                    </div>

                    <!-- Employee Info -->
                    <div class="employee-header">
                        <h2>{{ employee_data.employee.full_name }} - {{ employee_data.employee.position }}</h2>
                    </div>

                    <!-- Work Logs and Summary Panel -->
                    <div class="work-logs-container">
                        <div class="work-logs">
                            <table class="work-logs-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Entrada</th>
                                        <th>Salida</th>
                                        <th>Total</th>
                                        <th>Vacaciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for log in employee_data.work_logs %}
                                    <tr>
                                        <td>{{ log.log_date.strftime('%d/%m/%Y') }}</td>
                                        <td>{{ log.check_in_time.strftime('%H:%M') if log.check_in_time else '--:--' }}</td>
                                        <td>{{ log.check_out_time.strftime('%H:%M') if log.check_out_time else '--:--' }}</td>
                                        <td>{{ log.worked_hours | format_hours if log.worked_hours else '0 hours' }}</td>
                                        <td>
                                            <select>
                                                <option value="workingday" {% if log.holidays == 'Working day' %}selected{% endif %}>DÃ­a laboral</option>
                                                <option value="paid" {% if log.holidays == 'Paid' %}selected{% endif %}>Pagado</option>
                                                <option value="unpaid" {% if log.holidays == 'Unpaid' %}selected{% endif %}>No pagado</option>
                                                <option value="weekend" {% if log.holidays == 'Weekend' %}selected{% endif %}>Fin de semana</option>
                                            </select>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                        <!-- Summary Panel -->
                        <div class="summary-panel">
                            <h3>Summary</h3>
                            <p><strong>Total hours:</strong> <span>{{ employee_data.total_hours }}</span></p>
                            <p><strong>Total days:</strong> <span>{{ employee_data.total_days }}</span></p>
                            <p><strong>Overtime:</strong> <span>{{ employee_data.overtime }}</span></p>
                            <div class="holiday-status">
                                <p>Paid Holidays: <span class="badge yellow">{{ employee_data.paid_holidays }}</span></p>
                                <p>Unpaid Holidays: <span class="badge orange">{{ employee_data.unpaid_holidays }}</span></p>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/dotmodal.js') }}"></script>
    <script>
        console.log("JavaScript file loaded successfully!");
    </script>
</body>
</html>
